<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Remote Examples</title>
<script type="text/javascript" src="/siebog/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/siebog/radigost/radigost.js"></script>
<script type="text/javascript">
	var radigost = new Radigost("RemoteExample", true);
	var aid = null;
	
	function runAgent() {
		var name = $("#this-name").val();
		aid = radigost.start("RemoteAgent.js", name, new Observer());
	}
	
	function sendMessage() {
		var msg = new ACLMessage(ACLPerformative.REQUEST);
		msg.receivers = [ aid ];
		msg.content = {
			target: $("#remote-name").val(),
			content: $("#remote-content").val()
		};
		radigost.post(msg);
	}
	
	// Observer of received messages //
	function Observer() {
	}
	
	Observer.prototype = new AgentObserver();
	Observer.prototype.onStep = function(aid, msg) {
		var info = "Remote agent " + msg.sender + " says: " + msg.content;
		$("<p>" + info + "</p>").appendTo($("#remote-messages"));
	}
</script>
</head>
<body>
	<p>An example which demonstrates how agents located in physically
		distributed devices can communicate with each other.</p>
	<form>
		<div><label for="this-name">Please provide a name for the agent running on this device:</label></div>
		<div><input id="this-name" type="text"></div>
		<div><a href="#" onclick="event.preventDefault(); runAgent()">Run</a></div>
	</form>
	<div>
		<p>Send a message to a remote agent</p>
		<form>
			<div><label for="remote-name">Name of the remote agent:</label></div>
			<div><input id="remote-name" type="text"></div>
			<div><label for="remote-content">Content to send:</label></div>
			<div><input id="remote-content" type="text"></div>
			<div><a href="#" onclick="event.preventDefault(); sendMessage()">Send</a></div>
		</form>
	</div>
	<div>
		<p>Messages received from a remote agent:</p>
		<div id="remote-messages"></div>
	</div>
</body>
</html>