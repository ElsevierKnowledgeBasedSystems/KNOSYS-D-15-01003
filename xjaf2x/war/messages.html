<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Messages - XJAF2x Admin</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">    
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap-responsive.min.css" rel="stylesheet">
	<link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,600" rel="stylesheet">
	<link href="css/font-awesome.css" rel="stylesheet">
	<link href="js/chosen/chosen.css" rel="stylesheet">
	<link href="css/jquery-ui.css" rel="stylesheet">
	<link href="js/datetimepicker/jquery.datetimepicker.css" rel="stylesheet" /> 
	<link href="css/style.css" rel="stylesheet">
</head>
<body>

<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container"> <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
		<span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span> </a><a class="brand" href="index.html">XJAF2x Admin</a>
    </div>
  </div>
</div>
   
<div class="subnavbar">
  <div class="subnavbar-inner">
    <div class="container">
      <ul class="mainnav">
        <li><a href="index.html"><i class="icon-dashboard"></i><span>Dashboard</span></a></li>
		<li class="active"><a href="messages.html"><i class="icon-rss"></i><span>Messages</span></a></li>
        <li><a href="deployagents.html"><i class="icon-upload-alt"></i><span>Deploy Agents</span></a></li>
		<li><a href="cluster.html"><i class="icon-sitemap"></i><span>Cluster</span></a></li>
      </ul>
    </div>
  </div>
</div>


<div class="main">
	
	<div class="main-inner">

	    <div class="container">
	
	      <div class="row">
	      	
	      	<div class="span12">      		
	      		
	      		<div class="widget ">
	      			
	      			<div class="widget-header">
	      				<i class="icon-rss"></i>
	      				<h3>Send Message</h3>
	  				</div> <!-- /widget-header -->
					
					<div class="widget-content">
						
						
						
						<div class="tabbable">						
						<br>
						
							<div class="tab-content">
								
								<form id="edit-profile" class="form-horizontal">
								
	
									<fieldset>
									
									
										<div class="control-group">											
											<label class="control-label">Choose agent</label>
											<div class="controls">
												<div style="width:60%">
												  <div class="widget widget-table action-table" style="clear: none;">
													<div class="widget-header"> <i class="icon-play"></i>
													  <h3>Running agents</h3><button class="btn btn-success" style="float:right; margin-right:10px; margin-top:6px">Reload</button>
													</div>
													<div class="widget-content">
													<div style="height:300px; overflow-y: scroll;">
													  <table class="table table-striped table-bordered">
														<tbody id="running-table">
				
														</tbody>
													  </table>
													</div>
													  
													</div>
													<!-- /widget-content --> 
												  </div>
												</div>
												<!-- /span6 --> 
											</div> <!-- /controls -->				
										</div> <!-- /control-group -->
										
										
										<div class="control-group">											
											<label class="control-label" for="performatives">Performative</label>
											<div class="controls">
												<select class="chosen-select" id="performatives-list" name="selectedperformative">

												</select>
											</div> <!-- /controls -->				
										</div> <!-- /control-group -->
										
										<div class="control-group">											
											<label class="control-label" for="content">Content</label>
											<div class="controls">
												<textarea class="span6" rows="14" id="content"></textarea> 
												<p class="help-block">Denotes the content of the message; equivalently denotes the object of the action</p>
											</div>		
										</div> 
										
										<div class="control-group">											
											<label class="control-label" for="language">Language</label>
											<div class="controls">
												<input type="text" class="span6" id="language" value="">
												<p class="help-block">Denotes the language in which the content parameter is expressed.</p>
											</div>		
										</div> 
										
										<div class="control-group">											
											<label class="control-label" for="encoding">Encoding</label>
											<div class="controls">
												<input type="text" class="span6" id="encoding" value="">
												<p class="help-block">Denotes the specific encoding of the content language expression.</p>
											</div> 		
										</div>
										
										<div class="control-group">											
											<label class="control-label" for="ontology">Ontology</label>
											<div class="controls">
												<input type="text" class="span6" id="ontology" value="">
												<p class="help-block">Denotes the ontology(s) used to give a meaning to the symbols in the content expression.</p>
											</div>		
										</div>
										
										<div class="control-group">											
											<label class="control-label" for="protocol">Protocol</label>
											<div class="controls">
												<input type="text" class="span6" id="protocol" value="">
												<p class="help-block">Denotes the interaction protocol that the sending agent is employing with this ACL message.</p>
											</div>		
										</div>
										
										<div class="control-group">											
											<label class="control-label" for="conversationId">Conversation ID</label>
											<div class="controls">
												<input type="text" class="span6" id="conversationId" value="">
												<p class="help-block">Used to identify the ongoing sequence of communicative acts that together form a conversation.</p>
											</div>		
										</div>
										
										<div class="control-group">											
											<label class="control-label" for="replyWith">Reply With</label>
											<div class="controls">
												<input type="text" class="span6" id="replyWith" value="">
												<p class="help-block">Introduces an expression that will be used by the responding agent to identify this message.</p>
											</div>		
										</div>
										
										<div class="control-group">											
											<label class="control-label" for="inReplyTo">In Reply To</label>
											<div class="controls">
												<input type="text" class="span6" id="inReplyTo" value="">
												<p class="help-block">Denotes an expression that references an earlier action to which this message is a reply.</p>
											</div>		
										</div>
										
										<div class="control-group">											
											<label class="control-label" for="replyBy">Reply By</label>
											<div class="controls">
												<input id="datetimepicker" type="text" class="span6" id="replyBy">
												<p class="help-block">Indicates the latest time by which the sending agent would like to receive a reply.</p>
											</div>		
										</div>

										 <br />
										
											
										<div class="form-actions">
											<button type="submit" class="btn btn-primary">SEND MESSAGE</button> 
											<button class="btn">Reset</button>
										</div> <!-- /form-actions -->
									</fieldset>
								</form>
							</div>
						  
						  
						</div>
						
						
						
						
						
					</div> <!-- /widget-content -->
						
				</div> <!-- /widget -->
	      		
		    </div> <!-- /span8 -->
	      	
	      	
	      	
	      	
	      </div> <!-- /row -->
	
	    </div> <!-- /container -->
	    
	</div> <!-- /main-inner -->
    
</div> <!-- /main -->

<!-- log console -->
<div id="menuDiv">
	<div id="menuInfo">
		<div id="menuInfoWrapper" class="menuWrapper">
			<div id='menuInfoFormDiv'>
				<div id="menuInfoForm1" class="menuForm">
					XJAF2X<br>
					<table>
						<tr>
							<td>13:16:27,436</td>
							<td>INFO</td>
							<td>[org.hibernate.validator.internal.util.Version] (http-localhost/127.0.0.1:8080-5) HV000001: Hibernate Validator 4.3.1.Final</td>
						</tr>
						<tr>
							<td>13:16:27,849</td>
							<td>INFO</td>
							<td>[org.jboss.ejb.client] (http-localhost/127.0.0.1:8080-4) JBoss EJB Client version 1.0.16.Final</td>
						</tr>
						<tr>
							<td>13:16:28,053 </td>
							<td>INFO</td>
							<td>[xjaf2x.server.agents.ping.PingAgent] (pool-18-thread-1) Ping @ [zoran]</td>
						</tr>
						<tr>
							<td>13:17:52,088</td>
							<td>INFO</td>
							<td>[xjaf2x.server.messagemanager.MessageManager] (pool-18-thread-1) Agent not running: [xjaf2x_server_agents_ping_PongAgent/fdf]</td>
						</tr>
						<tr>
							<td>13:16:27,436</td>
							<td>INFO</td>
							<td>[org.hibernate.validator.internal.util.Version] (http-localhost/127.0.0.1:8080-5) HV000001: Hibernate Validator 4.3.1.Final</td>
						</tr>
						<tr>
							<td>13:16:27,849</td>
							<td>INFO</td>
							<td>[org.jboss.ejb.client] (http-localhost/127.0.0.1:8080-4) JBoss EJB Client version 1.0.16.Final</td>
						</tr>
						<tr>
							<td>13:16:28,053 </td>
							<td>INFO</td>
							<td>[xjaf2x.server.agents.ping.PingAgent] (pool-18-thread-1) Ping @ [zoran]</td>
						</tr>
						<tr>
							<td>13:17:52,088</td>
							<td>INFO</td>
							<td>[xjaf2x.server.messagemanager.MessageManager] (pool-18-thread-1) Agent not running: [xjaf2x_server_agents_ping_PongAgent/fdf]</td>
						</tr>
					</table>
				</div>
				
			</div>
			<div id="menuInfoTabs" class="menuTabs">
				<div id="menuInfoTabShow" class="clickable tab showHide inActive hidden" onclick="tab(this.id);">Show Logs</div>
				<div id="menuInfoTabHide" class="clickable tab showHide inActive" onclick="tab(this.id);">Hide Logs</div>
			</div>
		</div>
	</div>
</div>    
    
<!-- Placed at the end of the document so the pages load faster --> 
<script src="js/jquery-1.7.2.min.js"></script>
<script src="js/jquery-ui.js"></script>
<script src="js/datetimepicker/jquery.datetimepicker.js"></script>
<script src="js/chosen/chosen.jquery.js"></script>
	
<script src="js/bootstrap.js"></script>
<script src="js/base.js"></script>
<script src="js/toggle.js"></script>

<script type="text/javascript">

	function getRunningAgents()
	{
		$("#running-table").empty();
		
		jQuery.ajax({
			 type: "GET",
			 url: "rest/getrunning",
			 dataType: "json",
			 success: function (data)
			 {
				$.each(data.running, function(i, runningagent) {
					$("#running-table").append('<tr><td colspan="2"><input type="checkbox" name="selectedagent" value="' + runningagent + '" style="margin-right:5px;"/>' + runningagent + '<a href="javascript:stopAgent(\'' + runningagent  + '\');" class="btn btn-danger btn-small" style="float:right"><i class="btn-icon-only icon-remove"> </i></a></td></tr>');
				});	 
			 }
		});
	}
	
	function getAllPerformatives()
	{
		$("#performatives-list").empty();
		jQuery.ajax({
			 type: "GET",
			 url: "rest/getperformatives",
			 dataType: "json",
			 success: function (data)
			 {
				$.each(data.performatives, function(i, performative) {
					$("#performatives-list").append('<option value="' + performative + '">' + performative + '</option>');
				});		 
			 }
		});
	}
	
	
	function sendMessage()
	{		
		if (($('input[name=selectedagent]:checked').val() != null) && ($('#contentmessageinput').val() != ""))
		{
			jQuery.ajax({
				type: "GET",
				url: "rest/sendmsg/" + $('input[name=selectedagent]:checked').val() + "/" + $('select[name=selectedperformative]').val() + "/" + $('#contentmessageinput').val(),
				dataType: "json",
				success: function (data)
				{
					$('#contentmessageinput').val("");
					if (data.success == true)
						alert("Message was sent successfully.");
					else
						alert("Error");
				}
			});
		}
		else
		{
			alert("Please select Agent and enter Message content.");
		}
	}
	
	getRunningAgents();
	getAllPerformatives();
	
	
	
</script>

<script type="text/javascript">
	 $(".chosen-select").chosen({width: "40%"});
	 $('#datetimepicker').datetimepicker({format:'unixtime', inline:true});
</script>



 </body>

</html>
